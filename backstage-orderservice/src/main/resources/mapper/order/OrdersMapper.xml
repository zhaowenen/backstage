<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baojia.backstage.orderservice.modules.order.dao.OrdersMapper">

  <resultMap id="gatherMap" type="com.baojia.backstage.orderdomain.bo.OrdersBo">
    <result column="order_no" jdbcType="VARCHAR" property="orderNo" />
    <result column="mobile" jdbcType="VARCHAR" property="mobile" />
    <result column="plate_no" jdbcType="VARCHAR" property="plateNo" />
    <result column="nick_name" jdbcType="VARCHAR" property="nickName" />
    <result column="orders_mileage" jdbcType="DECIMAL" property="ordersMileage" />
    <result column="order_amount" jdbcType="DECIMAL" property="orderAmount" />
    <result column="order_status" javaType="INTEGER" property="orderStatus"/>

  </resultMap>

  <!--关联查询订单的分页信息-->
  <select id="complexOrdersPage" parameterType="com.baojia.backstage.orderdomain.dto.OrdersDto" resultMap="gatherMap">
    select * from (
          SELECT
          os.order_no,
          os.create_time,
          ob.plate_no,
          us.mobile,
          us.nick_name,
          ob.take_adress,
          ob.orders_mileage,
          os.order_amount,
          os.order_status
      FROM
          orders os
      LEFT JOIN orders_bike ob ON ob.order_no = os.order_no
      LEFT JOIN `user` us ON us.user_id = os.user_id
      ) gatherOrders
  </select>
</mapper>